# Backup and Recovery Configuration
# Environment variables for backup system

# Database Configuration
POSTGRES_DB=supabase
POSTGRES_USER=supabase
POSTGRES_PASSWORD=your_secure_password
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Backup Scheduling
BACKUP_SCHEDULE=0 2 * * *          # Daily at 2 AM
STORAGE_BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
VALIDATION_SCHEDULE=0 4 * * 1       # Weekly on Monday at 4 AM
SYNC_SCHEDULE=0 5 * * *             # Daily at 5 AM

# Retention Policies
BACKUP_RETENTION_DAYS=30           # Local backup retention
STORAGE_RETENTION_DAYS=90          # Storage backup retention
BACKUP_RETENTION_COUNT=7           # Number of base backups to keep

# Point-in-Time Recovery
PITR_ENABLED=true
WAL_ARCHIVE_MODE=on
WAL_LEVEL=replica
MAX_WAL_SENDERS=3
WAL_KEEP_SIZE=1GB
ARCHIVE_TIMEOUT=60s

# AWS S3 Configuration (Primary Region)
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-supabase-backups

# Cross-Region Backup Configuration
CROSS_REGION_BACKUP=true
CROSS_REGION=us-west-2
CROSS_REGION_BUCKET=your-supabase-backups-west

# WAL-E Configuration for PITR
WALE_S3_PREFIX=s3://your-supabase-backups/wal-e
WALE_S3_ENDPOINT=s3.us-east-1.amazonaws.com

# Notification Configuration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
EMAIL_ALERTS=admin@yourdomain.com

# Validation and Testing
VALIDATION_ENABLED=true
VALIDATION_RETENTION_DAYS=7
TEST_DATABASE_PREFIX=validation_test_

# Performance Settings
BACKUP_COMPRESSION_LEVEL=9
PARALLEL_JOBS=2
BACKUP_TIMEOUT=3600

# Security Settings
BACKUP_ENCRYPTION=true
ENCRYPTION_KEY_ID=your-kms-key-id
BACKUP_CHECKSUM=md5

# Monitoring Integration
MONITORING_ENABLED=true
PROMETHEUS_PUSHGATEWAY=http://pushgateway:9091
GRAFANA_ANNOTATION_URL=http://grafana:3000/api/annotations
